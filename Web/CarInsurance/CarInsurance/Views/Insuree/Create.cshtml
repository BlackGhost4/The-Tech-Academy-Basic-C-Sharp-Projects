@model CarInsurance.ViewModels.InsureeVM
<h2>Insurer "The Happy Car"</h2>

<div class="row no-gutters m-3">
    <div class="card col-sm-12 col-md-10 col-lg-6 mx-auto shadow">
        <div class="card-header text-center">
            <h5 class="m-0">Sign-ups</h5>
        </div>
        <div class="card-body">

        </div>
    </div>
</div>

@using (Html.BeginForm())
{
   
    

    <div class="container">
        <div class="row">
            <div class="col-sm-6 col-md-6 col-lg-6">
                <div class="card col-sm-5 col-md-5 col-lg-5 mx-auto shadow">
                    <div class="card-header text-center">
                        <h5 class="m-0">Quote</h5>
                    </div>
                    <div class="card-body">
                        <div class="container">
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.FirstName, "First Name", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.LastName, "Last Name", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.LastName, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.LastName, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.EmailAddress, "Email Address", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.EmailAddress, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.EmailAddress, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.DateOfBirth, "Date Of Birth (mm-dd-yyyy)", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.DateOfBirth, new { htmlAttributes = new { Value = Model.DateOfBirth.ToString("MM-dd-yyyy"), @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.DateOfBirth, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.DUI, "DUI ?", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    <div class="checkbox">
                                        @Html.EditorFor(model => model.DUI)
                                        @Html.ValidationMessageFor(model => model.DUI, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.SpeedingTickets, "Sppeding Tickets", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.SpeedingTickets, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.SpeedingTickets, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.CoverageType, "Coverage Type", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    <div class="checkbox">
                                        @Html.EditorFor(model => model.CoverageType)
                                        @Html.ValidationMessageFor(model => model.CoverageType, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.CarYear, "Year", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.CarYear, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.CarYear, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    @Html.LabelFor(model => model.Quote, "Total Quote", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <div class="col-md-5">
                                    @Html.EditorFor(model => model.Quote, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                                    @Html.ValidationMessageFor(model => model.Quote, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <input type="button" value="Calculate" class="btn btn-primary" />
                                </div>
                                <div class="col">
                                    <input type="submit" value="Quote" class="btn btn-success" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-6 col-lg-6">
                <div class="card col-sm-5 col-md-5 col-lg-5 mx-auto shadow">
                    <div class="card-header text-center">
                        <h5 class="m-0">Vehicle</h5>
                    </div>
                    <div class="card-body">
                        <div class="container">
                            <div class="row">
                                <div class="col-sm-10 col-md-10 col-lg-10 mx-auto d-flex justify-content-center text-center">
                                    @Html.DropDownListFor(m => m.CarMakes, Model.CarMakes, "Select a vehicle....", new { @class = "form-control", @onchange = "GetExtraQuoteVehicle()" })
                                    @Html.EditorFor(model => model.ExtraQuote, new { htmlAttributes = new { @class = "form-control", style = "display:none" } })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-10 col-md-10 col-lg-10 mx-auto d-flex justify-content-center">
                                    <img src="~/Images/Cars/vehicle.jpg" id="imageVehicle" width="300" height="200" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-10 col-md-10 col-lg-10 mx-auto text-center" id="messageCostExtraVehicle" style="color:red;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts
{
    <script>
        function GetExtraQuoteVehicle() {
            var idCar = $('#CarMakes').val();
            if (idCar.length > 0) {
                $.ajax({
                    url: '/Insuree/ExtraQuoteVehicle',
                    type: "GET",
                    dataType: "JSON",
                    data: { IdCar: idCar },
                    success: function (response) {
                        var auxExtra = response.Data.extraQuote;
                        if (auxExtra != "0") {
                            $("#messageCostExtraVehicle").html("This vehicle has an extra cost of $" + auxExtra);
                        } else {
                            $("#messageCostExtraVehicle").html("");
                        }
                        $('#imageVehicle').attr('src', '/Images/Cars/' + idCar + '.jpg');
                        $("#ExtraQuote").val(auxExtra);
                    }
                });
            } else {
                $("#ExtraQuote").val("0");
                $("#messageCostExtraVehicle").html("");
                $('#imageVehicle').attr('src', '/Images/Cars/vehicle.jpg');
            }
        }
    </script>
}
